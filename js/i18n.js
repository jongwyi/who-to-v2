const translations = {
    en: {
        appTitle: 'WHO2MEET',
        subtitle: 'Find Your Perfect Team',
        sessionCode: 'Session Code',
        joinSession: 'Join Session',
        createSession: 'Create New Session (Instructor)',
        reEnterInstructor: 'Re-enter as Instructor →',
        yourName: 'Your Name',
        password: 'Password',
        emojiOptional: 'Emoji (optional)',
        continue: 'Continue →',
        back: '← Back',
        sessionName: 'Session Name',
        yourNameInstructor: 'Your Name (Instructor)',
        teamSize: 'Team Size',
        roleTags: 'Role Tags',
        interestTags: 'Interest Tags',
        matchingWeights: 'Matching Weights',
        weightHint: 'Adjust how much each factor matters (must sum to 100%)',
        roleDiversity: 'Role Diversity',
        interestSimilarity: 'Interest Similarity',
        createSessionBtn: 'Create Session →',
        stepRoles: 'Your Roles',
        stepInterests: 'Your Interests',
        stepMessage: 'Message to Team',
        next: 'Next →',
        submit: 'Submit ✓',
        previous: '← Previous',
        waiting: 'Waiting for teams to be assigned...',
        checkStatus: 'Check Status',
        instructorDashboard: 'Instructor Dashboard',
        shareCode: 'Share this code with your students',
        runMatching: 'Run Matching',
        viewResults: 'View Results →',
        refresh: 'Refresh',
        studentsJoined: 'Students joined',
        yourTeam: 'Your Team',
        allTeams: 'All Teams',
        backToDashboard: '← Back to Dashboard',
        noTeamsYet: 'No teams yet.',
        cohesion: 'Cohesion',
        you: '(You)',
        new: 'new',
        viewTutorial: 'View Tutorial →',
        newToService: 'New here?',
        roleSelection: 'Role Selection',
        roleSelectionSubtitle: 'Select a role to view the tutorial',
        instructor: 'Instructor',
        instructorDesc: 'Creates sessions and matches students',
        student: 'Student',
        studentDesc: 'Joins sessions and selects roles',
        tutorialNext: 'Next →',
        done: 'Done',
        stepCounter: 'Step %1 / %2',
        tutorialInstructorStep1: 'Step 1: Create Session',
        tutorialInstructorStep1Desc: 'Click "Create New Session (Instructor)" on the home screen. Enter session name, instructor name, emoji (optional), password, and team size. Add role tags and interest tags. After filling all fields, click "Create Session →" to create the session.',
        tutorialInstructorStep2: 'Step 2: Share Code',
        tutorialInstructorStep2Desc: 'Share the 6-character session code with your students. They will enter this code to join the session. Wait for students to join and complete their profiles.',
        tutorialInstructorStep3: 'Step 3: Run Matching',
        tutorialInstructorStep3Desc: 'When students have joined and completed their profiles, click "Run Matching" to automatically form teams based on role diversity and interest similarity.',
        tutorialInstructorStep4: 'Step 4: View Results',
        tutorialInstructorStep4Desc: 'View the generated teams. Each team shows members, their roles, interests, and cohesion score. Students can see their assigned team on their screen.',
        tutorialParticipantStep1: 'Step 1: Join Session',
        tutorialParticipantStep1Desc: 'Enter the 6-character session code from your instructor. Enter your name, optional emoji, and create a password. Click "Continue →" to join.',
        tutorialParticipantStep2: 'Step 2: Select Roles',
        tutorialParticipantStep2Desc: 'Pick exactly two roles. The first is your priority role, the second is your secondary. These help form balanced teams with diverse skills.',
        tutorialParticipantStep3: 'Step 3: Select Interests',
        tutorialParticipantStep3Desc: 'Select your interests from the available tags. Add a custom interest if needed. Write a short message to your future teammates.',
        tutorialParticipantStep4: 'Step 4: View Team',
        tutorialParticipantStep4Desc: 'After the instructor runs matching, you will see your assigned team. View your teammates\' roles, interests, and messages. Start collaborating!'
    },
    ko: {
        appTitle: 'WHO2MEET',
        subtitle: '완벽한 팀을 만나세요',
        sessionCode: '세션 코드',
        joinSession: '세션 참여',
        createSession: '새 세션 만들기 (강사)',
        reEnterInstructor: '강사로 다시 들어가기 →',
        yourName: '이름',
        password: '비밀번호',
        emojiOptional: '이모지 (선택)',
        continue: '계속 →',
        back: '← 뒤로',
        sessionName: '세션 이름',
        yourNameInstructor: '이름 (강사)',
        teamSize: '팀 크기',
        roleTags: '역할 태그',
        interestTags: '관심사 태그',
        matchingWeights: '매칭 가중치',
        weightHint: '각 요소의 비중을 조절하세요 (합 100%)',
        roleDiversity: '역할 다양성',
        interestSimilarity: '관심사 유사도',
        createSessionBtn: '세션 만들기 →',
        stepRoles: '당신의 역할',
        stepInterests: '당신의 관심사',
        stepMessage: '팀에게 한마디',
        next: '다음 →',
        submit: '제출 ✓',
        previous: '← 이전',
        waiting: '팀 배정을 기다리는 중...',
        checkStatus: '상태 확인',
        instructorDashboard: '강사 대시보드',
        shareCode: '학생들에게 이 코드를 공유하세요',
        runMatching: '매칭 실행',
        viewResults: '결과 보기 →',
        refresh: '새로고침',
        studentsJoined: '참가한 학생',
        yourTeam: '내 팀',
        allTeams: '전체 팀',
        backToDashboard: '← 대시보드로',
        noTeamsYet: '아직 팀이 없습니다.',
        cohesion: '응집도',
        you: '(나)',
        new: 'new',
        viewTutorial: '튜토리얼 보기 →',
        newToService: '처음이신가요?',
        roleSelection: '역할 선택',
        roleSelectionSubtitle: '튜토리얼을 보려면 역할을 선택하세요',
        instructor: '강사',
        instructorDesc: '세션을 생성하고 학생들을 매칭합니다',
        student: '학생',
        studentDesc: '세션에 참가하고 역할을 선택합니다',
        tutorialNext: '다음 →',
        done: '완료',
        stepCounter: '단계 %1 / %2',
        tutorialInstructorStep1: '1단계: 세션 생성',
        tutorialInstructorStep1Desc: '홈 화면에서 "새 세션 생성 (강사)" 버튼을 클릭하세요. 세션 이름, 강사 이름, 이모지(선택), 비밀번호, 팀 크기를 입력합니다. 역할 태그와 관심사 태그를 추가하세요. 모든 필드 입력 후 "Create Session →" 버튼을 클릭하여 세션을 생성합니다.',
        tutorialInstructorStep2: '2단계: 코드 공유',
        tutorialInstructorStep2Desc: '6자리 세션 코드를 학생들에게 공유하세요. 학생들이 이 코드로 세션에 참가합니다. 학생들이 참가하고 프로필을 완성할 때까지 기다리세요.',
        tutorialInstructorStep3: '3단계: 매칭 실행',
        tutorialInstructorStep3Desc: '학생들이 참가하고 프로필을 완성한 후 "Run Matching" 버튼을 클릭하면 역할 다양성과 관심사 유사도를 기반으로 팀이 자동으로 구성됩니다.',
        tutorialInstructorStep4: '4단계: 결과 확인',
        tutorialInstructorStep4Desc: '생성된 팀을 확인하세요. 각 팀은 멤버, 역할, 관심사, 응집도를 보여줍니다. 학생들은 자신의 화면에서 배정된 팀을 볼 수 있습니다.',
        tutorialParticipantStep1: '1단계: 세션 참가',
        tutorialParticipantStep1Desc: '강사에게 받은 6자리 세션 코드를 입력하세요. 이름, 이모지(선택), 비밀번호를 입력하고 "Continue →"를 클릭하여 참가합니다.',
        tutorialParticipantStep2: '2단계: 역할 선택',
        tutorialParticipantStep2Desc: '정확히 두 개의 역할을 선택하세요. 첫 번째가 우선 역할, 두 번째가 부 역할입니다. 이를 통해 다양한 역량을 가진 균형 잡힌 팀이 구성됩니다.',
        tutorialParticipantStep3: '3단계: 관심사 선택',
        tutorialParticipantStep3Desc: '제공된 태그에서 관심사를 선택하세요. 필요시 직접 관심사를 추가할 수 있습니다. 미래의 팀원들에게 한마디를 적어주세요.',
        tutorialParticipantStep4: '4단계: 팀 확인',
        tutorialParticipantStep4Desc: '강사가 매칭을 실행한 후 배정된 팀을 확인할 수 있습니다. 팀원들의 역할, 관심사, 메시지를 보고 함께 협업을 시작하세요!'
    }
};

let currentLang = 'en';

export function getLang() {
    return currentLang;
}

export function setLang(lang) {
    if (translations[lang]) currentLang = lang;
}

export function t(key) {
    return translations[currentLang][key] ?? translations.en[key] ?? key;
}

export function applyToPage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (key) el.textContent = t(key);
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (key) el.placeholder = t(key);
    });
}
