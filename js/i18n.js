const translations = {
    en: {
        appTitle: 'who2meet',
        subtitle: 'Find Your Perfect Team',
        sessionCode: 'Session Code',
        joinSession: 'Join Session',
        createSession: 'Create New Session (Instructor)',
        reEnterInstructor: 'Re-enter as Instructor â†’',
        yourName: 'Your Name',
        password: 'Password',
        emojiOptional: 'Emoji (optional)',
        continue: 'Continue â†’',
        back: 'â† Back',
        sessionName: 'Session Name',
        yourNameInstructor: 'Your Name (Instructor)',
        teamSize: 'Team Size',
        roleTags: 'Role Tags',
        interestTags: 'Interest Tags',
        matchingWeights: 'Matching Weights',
        weightHint: 'Adjust how much each factor matters (must sum to 100%)',
        roleDiversity: 'Role Diversity',
        interestSimilarity: 'Interest Similarity',
        extroversionBalance: 'Extroversion Balance',
        introvertTag: 'Introverted',
        extrovertTag: 'Extroverted',
        extroversionScaleHint: 'Students choose 0â€“10 (0 = introverted, 10 = extroverted)',
        matchingParams: 'Matching Parameters',
        paramHint: 'Select at least 2 parameters. Toggle ON to configure.',
        paramSettingsDone: 'Settings Done',
        createSessionBtn: 'Create Session â†’',
        stepRoles: 'Your Roles',
        stepInterests: 'Your Interests',
        stepMessage: 'Message to Team',
        next: 'Next â†’',
        submit: 'Submit âœ“',
        previous: 'â† Previous',
        waiting: 'Waiting for teams to be assigned...',
        checkStatus: 'Check Status',
        instructorDashboard: 'Instructor Dashboard',
        shareCode: 'Share this code with your students',
        clickToCopy: 'Click to copy',
        copyDone: 'Copied!',
        copyFailed: 'Copy failed',
        runMatching: 'Run Matching',
        viewResults: 'View Results â†’',
        refresh: 'Refresh',
        studentsJoined: 'Students joined',
        yourTeam: 'Your Team',
        allTeams: 'All Teams',
        backToDashboard: 'â† Back to Dashboard',
        noTeamsYet: 'No teams yet.',
        cohesion: 'Cohesion',
        you: '(You)',
        new: 'new',
        viewTutorial: 'View Tutorial â†’',
        newToService: 'New here?',
        changeRole: 'Change Role',
        roleSelectTitle: 'Select a role',
        roleSelectSubtitle: 'Select either student or instructor',
        sessionCodePlaceholder: 'Enter session code',
        roleSelection: 'Role Selection',
        roleSelectionSubtitle: 'Select a role to view the tutorial',
        instructor: 'Instructor',
        instructorDesc: 'Creates sessions and matches students',
        student: 'Student',
        studentDesc: 'Joins sessions and selects roles',
        tutorialNext: 'Next â†’',
        done: 'Done',
        stepCounter: 'Step %1 / %2',
        tutorialInstructorStep1: 'Step 1: Create Session',
        tutorialInstructorStep1Desc: 'Click "Create New Session (Instructor)" on the home screen. Enter session name, instructor name, emoji (optional), password, and team size. Add role tags and interest tags. After filling all fields, click "Create Session â†’" to create the session.',
        tutorialInstructorStep2: 'Step 2: Share Code',
        tutorialInstructorStep2Desc: 'Share the 6-character session code with your students. They will enter this code to join the session. Wait for students to join and complete their profiles.',
        tutorialInstructorStep3: 'Step 3: Run Matching',
        tutorialInstructorStep3Desc: 'When students have joined and completed their profiles, click "Run Matching" to automatically form teams based on role diversity and interest similarity.',
        tutorialInstructorStep4: 'Step 4: View Results',
        tutorialInstructorStep4Desc: 'View the generated teams. Each team shows members, their roles, interests, and cohesion score. Students can see their assigned team on their screen.',
        tutorialParticipantStep1: 'Step 1: Join Session',
        tutorialParticipantStep1Desc: 'Enter the 6-character session code from your instructor. Enter your name, optional emoji, and create a password. Click "Continue â†’" to join.',
        tutorialParticipantStep2: 'Step 2: Select Roles',
        tutorialParticipantStep2Desc: 'Pick exactly two roles. The first is your priority role, the second is your secondary. These help form balanced teams with diverse skills.',
        tutorialParticipantStep3: 'Step 3: Select Interests',
        tutorialParticipantStep3Desc: 'Select your interests from the available tags. Add a custom interest if needed. Write a short message to your future teammates.',
        tutorialParticipantStep4: 'Step 4: View Team',
        tutorialParticipantStep4Desc: 'After the instructor runs matching, you will see your assigned team. View your teammates\' roles, interests, and messages. Start collaborating!',
        dashboardWeights: 'Weights: %1% Role / %2% Interest',
        teamsPublished: 'âœ… Teams Published',
        openForRegistration: 'â³ Open for Registration',
        studentsJoinedCount: 'Students joined: %1',
        quickTestSessionName: 'Quick Test Session (30 users)',
        quickTestBtn: 'ðŸ§ª Quick Test (30)',
        allFondOf: 'All fond of:',
        interestLabel: 'Interest:',
        priority1st: '1st',
        priority2nd: '2nd',
        yourPriorities: 'Your priorities: ',
        stepYourRoles: 'Your Roles',
        stepYourInterests: 'Your Interests',
        stepExtroversion: 'Extroversion',
        stepMessageToTeam: 'Message to Team',
        extroversionLabel: 'How extroverted are you? (0 = introverted, 10 = extroverted)',
        extrovertedLabel: 'Extroverted',
        introvertedLabel: 'Introverted',
        pointsSuffix: ' pts',
        feedbackBtn: 'Leave Feedback',
        feedbackTitle: 'Leave Feedback',
        feedbackDesc: 'Share your ideas for improving our service.',
        feedbackPlaceholder: 'Enter your improvement ideas...',
        feedbackEmailToggle: 'Would you like to leave your email?',
        feedbackEmailPlaceholder: 'your@email.com',
        feedbackSubmit: 'Send',
        feedbackConfirm: 'Send feedback?',
        feedbackSuccess: 'Thank you! Your feedback has been sent.',
        feedbackError: 'Failed to send. Please try again.',
        emailResultsBtn: 'Send via Email',
        emailResultsTitle: 'Receive Results via Email',
        emailResultsDesc: 'Results will be sent as a formatted HTML email.',
        emailResultsPlaceholder: 'your@email.com',
        emailResultsSubmit: 'Send',
        emailResultsConfirm: 'Send results to this email?',
        emailResultsSuccess: 'Sent! Check your email.',
        emailResultsError: 'Failed to send. Please try again.',
        emailResultsNoTeams: 'No teams yet. Run matching first.'
    },
    ko: {
        appTitle: 'who2meet',
        subtitle: 'ì™„ë²½í•œ íŒ€ì„ ë§Œë‚˜ì„¸ìš”',
        sessionCode: 'ì„¸ì…˜ ì½”ë“œ',
        joinSession: 'ì„¸ì…˜ ì°¸ì—¬',
        createSession: 'ìƒˆ ì„¸ì…˜ ë§Œë“¤ê¸° (ê°•ì‚¬)',
        reEnterInstructor: 'ì´ë¯¸ ë§Œë“¤ì–´ì§„ ë°©ìœ¼ë¡œ ë‹¤ì‹œ ë“¤ì–´ê°€ê¸° â†’',
        yourName: 'ì´ë¦„',
        password: 'ë¹„ë°€ë²ˆí˜¸',
        emojiOptional: 'ì´ëª¨ì§€ (ì„ íƒ)',
        continue: 'ê³„ì† â†’',
        back: 'â† ë’¤ë¡œ',
        sessionName: 'ì„¸ì…˜ ì´ë¦„',
        yourNameInstructor: 'ì´ë¦„ (ê°•ì‚¬)',
        teamSize: 'íŒ€ í¬ê¸°',
        roleTags: 'ì—­í•  íƒœê·¸',
        interestTags: 'ê´€ì‹¬ì‚¬ íƒœê·¸',
        matchingWeights: 'ë§¤ì¹­ ê°€ì¤‘ì¹˜',
        weightHint: 'ê° ìš”ì†Œì˜ ë¹„ì¤‘ì„ ì¡°ì ˆí•˜ì„¸ìš” (í•© 100%)',
        roleDiversity: 'ì—­í•  ë‹¤ì–‘ì„±',
        interestSimilarity: 'ê´€ì‹¬ì‚¬ ìœ ì‚¬ë„',
        extroversionBalance: 'ì™¸í–¥ì„± ê· í˜•',
        introvertTag: 'ë‚´í–¥',
        extrovertTag: 'ì™¸í–¥',
        extroversionScaleHint: 'í•™ìƒì€ 0â€“10 ì¤‘ ì„ íƒ (0=ë‚´í–¥ì , 10=ì™¸í–¥ì )',
        matchingParams: 'ë§¤ì¹­ ë§¤ê°œë³€ìˆ˜',
        paramHint: 'ìµœì†Œ 2ê°œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”. í† ê¸€ ONìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.',
        paramSettingsDone: 'ì„¤ì • ì™„ë£Œ',
        createSessionBtn: 'ì„¸ì…˜ ë§Œë“¤ê¸° â†’',
        stepRoles: 'ë‹¹ì‹ ì˜ ì—­í• ',
        stepInterests: 'ë‹¹ì‹ ì˜ ê´€ì‹¬ì‚¬',
        stepMessage: 'íŒ€ì—ê²Œ í•œë§ˆë””',
        next: 'ë‹¤ìŒ â†’',
        submit: 'ì œì¶œ âœ“',
        previous: 'â† ì´ì „',
        waiting: 'íŒ€ ë°°ì •ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...',
        checkStatus: 'ìƒíƒœ í™•ì¸',
        instructorDashboard: 'ê°•ì‚¬ ëŒ€ì‹œë³´ë“œ',
        shareCode: 'í•™ìƒë“¤ì—ê²Œ ì´ ì½”ë“œë¥¼ ê³µìœ í•˜ì„¸ìš”',
        clickToCopy: 'í´ë¦­í•˜ì—¬ ë³µì‚¬',
        copyDone: 'ë³µì‚¬ë¨!',
        copyFailed: 'ë³µì‚¬ ì‹¤íŒ¨',
        runMatching: 'ë§¤ì¹­ ì‹¤í–‰',
        viewResults: 'ê²°ê³¼ ë³´ê¸° â†’',
        refresh: 'ìƒˆë¡œê³ ì¹¨',
        studentsJoined: 'ì°¸ê°€í•œ í•™ìƒ',
        yourTeam: 'ë‚´ íŒ€',
        allTeams: 'ì „ì²´ íŒ€',
        backToDashboard: 'â† ëŒ€ì‹œë³´ë“œë¡œ',
        noTeamsYet: 'ì•„ì§ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤.',
        cohesion: 'ì‘ì§‘ë„',
        you: '(ë‚˜)',
        new: 'new',
        viewTutorial: 'íŠœí† ë¦¬ì–¼ ë³´ê¸° â†’',
        newToService: 'ì²˜ìŒì´ì‹ ê°€ìš”?',
        changeRole: 'ì—­í•  ë³€ê²½',
        roleSelectTitle: 'ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”',
        roleSelectSubtitle: 'í•™ìƒ ë˜ëŠ” ê°•ì‚¬ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”',
        sessionCodePlaceholder: 'ì„¸ì…˜ ì½”ë“œ ìž…ë ¥',
        roleSelection: 'ì—­í•  ì„ íƒ',
        roleSelectionSubtitle: 'íŠœí† ë¦¬ì–¼ì„ ë³´ë ¤ë©´ ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”',
        instructor: 'ê°•ì‚¬',
        instructorDesc: 'ì„¸ì…˜ì„ ìƒì„±í•˜ê³  í•™ìƒë“¤ì„ ë§¤ì¹­í•©ë‹ˆë‹¤',
        student: 'í•™ìƒ',
        studentDesc: 'ì„¸ì…˜ì— ì°¸ê°€í•˜ê³  ì—­í• ì„ ì„ íƒí•©ë‹ˆë‹¤',
        tutorialNext: 'ë‹¤ìŒ â†’',
        done: 'ì™„ë£Œ',
        stepCounter: 'ë‹¨ê³„ %1 / %2',
        tutorialInstructorStep1: '1ë‹¨ê³„: ì„¸ì…˜ ìƒì„±',
        tutorialInstructorStep1Desc: 'í™ˆ í™”ë©´ì—ì„œ "ìƒˆ ì„¸ì…˜ ìƒì„± (ê°•ì‚¬)" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”. ì„¸ì…˜ ì´ë¦„, ê°•ì‚¬ ì´ë¦„, ì´ëª¨ì§€(ì„ íƒ), ë¹„ë°€ë²ˆí˜¸, íŒ€ í¬ê¸°ë¥¼ ìž…ë ¥í•©ë‹ˆë‹¤. ì—­í•  íƒœê·¸ì™€ ê´€ì‹¬ì‚¬ íƒœê·¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. ëª¨ë“  í•„ë“œ ìž…ë ¥ í›„ "Create Session â†’" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.',
        tutorialInstructorStep2: '2ë‹¨ê³„: ì½”ë“œ ê³µìœ ',
        tutorialInstructorStep2Desc: '6ìžë¦¬ ì„¸ì…˜ ì½”ë“œë¥¼ í•™ìƒë“¤ì—ê²Œ ê³µìœ í•˜ì„¸ìš”. í•™ìƒë“¤ì´ ì´ ì½”ë“œë¡œ ì„¸ì…˜ì— ì°¸ê°€í•©ë‹ˆë‹¤. í•™ìƒë“¤ì´ ì°¸ê°€í•˜ê³  í”„ë¡œí•„ì„ ì™„ì„±í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì„¸ìš”.',
        tutorialInstructorStep3: '3ë‹¨ê³„: ë§¤ì¹­ ì‹¤í–‰',
        tutorialInstructorStep3Desc: 'í•™ìƒë“¤ì´ ì°¸ê°€í•˜ê³  í”„ë¡œí•„ì„ ì™„ì„±í•œ í›„ "Run Matching" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì—­í•  ë‹¤ì–‘ì„±ê³¼ ê´€ì‹¬ì‚¬ ìœ ì‚¬ë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒ€ì´ ìžë™ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.',
        tutorialInstructorStep4: '4ë‹¨ê³„: ê²°ê³¼ í™•ì¸',
        tutorialInstructorStep4Desc: 'ìƒì„±ëœ íŒ€ì„ í™•ì¸í•˜ì„¸ìš”. ê° íŒ€ì€ ë©¤ë²„, ì—­í• , ê´€ì‹¬ì‚¬, ì‘ì§‘ë„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. í•™ìƒë“¤ì€ ìžì‹ ì˜ í™”ë©´ì—ì„œ ë°°ì •ëœ íŒ€ì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.',
        tutorialParticipantStep1: '1ë‹¨ê³„: ì„¸ì…˜ ì°¸ê°€',
        tutorialParticipantStep1Desc: 'ê°•ì‚¬ì—ê²Œ ë°›ì€ 6ìžë¦¬ ì„¸ì…˜ ì½”ë“œë¥¼ ìž…ë ¥í•˜ì„¸ìš”. ì´ë¦„, ì´ëª¨ì§€(ì„ íƒ), ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ê³  "Continue â†’"ë¥¼ í´ë¦­í•˜ì—¬ ì°¸ê°€í•©ë‹ˆë‹¤.',
        tutorialParticipantStep2: '2ë‹¨ê³„: ì—­í•  ì„ íƒ',
        tutorialParticipantStep2Desc: 'ì •í™•ížˆ ë‘ ê°œì˜ ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”. ì²« ë²ˆì§¸ê°€ ìš°ì„  ì—­í• , ë‘ ë²ˆì§¸ê°€ ë¶€ ì—­í• ìž…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì—­ëŸ‰ì„ ê°€ì§„ ê· í˜• ìž¡ížŒ íŒ€ì´ êµ¬ì„±ë©ë‹ˆë‹¤.',
        tutorialParticipantStep3: '3ë‹¨ê³„: ê´€ì‹¬ì‚¬ ì„ íƒ',
        tutorialParticipantStep3Desc: 'ì œê³µëœ íƒœê·¸ì—ì„œ ê´€ì‹¬ì‚¬ë¥¼ ì„ íƒí•˜ì„¸ìš”. í•„ìš”ì‹œ ì§ì ‘ ê´€ì‹¬ì‚¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë¯¸ëž˜ì˜ íŒ€ì›ë“¤ì—ê²Œ í•œë§ˆë””ë¥¼ ì ì–´ì£¼ì„¸ìš”.',
        tutorialParticipantStep4: '4ë‹¨ê³„: íŒ€ í™•ì¸',
        tutorialParticipantStep4Desc: 'ê°•ì‚¬ê°€ ë§¤ì¹­ì„ ì‹¤í–‰í•œ í›„ ë°°ì •ëœ íŒ€ì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. íŒ€ì›ë“¤ì˜ ì—­í• , ê´€ì‹¬ì‚¬, ë©”ì‹œì§€ë¥¼ ë³´ê³  í•¨ê»˜ í˜‘ì—…ì„ ì‹œìž‘í•˜ì„¸ìš”!',
        dashboardWeights: 'ê°€ì¤‘ì¹˜: %1% ì—­í•  / %2% ê´€ì‹¬ì‚¬',
        teamsPublished: 'âœ… íŒ€ ë°°ì • ì™„ë£Œ',
        openForRegistration: 'â³ ë“±ë¡ ì§„í–‰ ì¤‘',
        studentsJoinedCount: 'ì°¸ê°€í•œ í•™ìƒ: %1',
        quickTestSessionName: 'ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì„¸ì…˜ (30ëª…)',
        quickTestBtn: 'ðŸ§ª 30ëª… í…ŒìŠ¤íŠ¸',
        allFondOf: 'ê³µí†µ ê´€ì‹¬ì‚¬:',
        interestLabel: 'ê´€ì‹¬ì‚¬:',
        priority1st: '1ìˆœìœ„',
        priority2nd: '2ìˆœìœ„',
        yourPriorities: 'ì„ íƒí•œ ìš°ì„ ìˆœìœ„: ',
        stepYourRoles: 'ë‹¹ì‹ ì˜ ì—­í• ',
        stepYourInterests: 'ë‹¹ì‹ ì˜ ê´€ì‹¬ì‚¬',
        stepExtroversion: 'ì™¸í–¥ì„±',
        stepMessageToTeam: 'íŒ€ì—ê²Œ í•œë§ˆë””',
        extroversionLabel: 'ì™¸í–¥ì ì¸ê°€ìš”? (0=ë‚´í–¥ì , 10=ì™¸í–¥ì )',
        extrovertedLabel: 'ì™¸í–¥ì ',
        introvertedLabel: 'ë‚´í–¥ì ',
        pointsSuffix: 'ì ',
        feedbackBtn: 'í”¼ë“œë°± ë‚¨ê¸°ê¸°',
        feedbackTitle: 'í”¼ë“œë°± ë‚¨ê¸°ê¸°',
        feedbackDesc: 'ì„œë¹„ìŠ¤ ê°œì„ ì„ ìœ„í•œ ì•„ì´ë””ì–´ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”.',
        feedbackPlaceholder: 'ê°œì„  ì•„ì´ë””ì–´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”...',
        feedbackEmailToggle: 'ì´ë©”ì¼ì„ ë‚¨ê¸°ì‹œê² ìŠµë‹ˆê¹Œ?',
        feedbackEmailPlaceholder: 'your@email.com',
        feedbackSubmit: 'ì „ì†¡',
        feedbackConfirm: 'ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?',
        feedbackSuccess: 'ê°ì‚¬í•©ë‹ˆë‹¤! í”¼ë“œë°±ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
        feedbackError: 'ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
        emailResultsBtn: 'ì´ë©”ì¼ë¡œ ë°›ê¸°',
        emailResultsTitle: 'ì´ë©”ì¼ë¡œ ê²°ê³¼ ë°›ê¸°',
        emailResultsDesc: 'ê²°ê³¼ í™”ë©´ì´ í¬ë§·ëœ HTML ì´ë©”ì¼ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.',
        emailResultsPlaceholder: 'your@email.com',
        emailResultsSubmit: 'ì „ì†¡',
        emailResultsConfirm: 'ì´ë©”ì¼ë¡œ ì „ì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
        emailResultsSuccess: 'ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.',
        emailResultsError: 'ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
        emailResultsNoTeams: 'ë§¤ì¹­ëœ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë§¤ì¹­ì„ ì‹¤í–‰í•˜ì„¸ìš”.'
    }
};

let currentLang = 'ko';

export function getLang() {
    return currentLang;
}

export function setLang(lang) {
    if (translations[lang]) currentLang = lang;
}

export function t(key) {
    return translations[currentLang][key] ?? translations.en[key] ?? key;
}

/** Format string with %1, %2, ... placeholders */
export function tf(key, ...args) {
    let s = t(key);
    args.forEach((a, i) => { s = s.replace('%' + (i + 1), String(a)); });
    return s;
}

export function applyToPage() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (key) el.textContent = t(key);
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (key) el.placeholder = t(key);
    });
}
